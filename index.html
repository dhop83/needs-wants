<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Needs vs. Wants Challenge</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f5f5f5;
            overflow-x: hidden; /* For confetti */
        }
        .screen {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .active {
            display: block;
        }
        h1 {
            color: #4a86e8;
            margin-bottom: 30px;
        }
        h2 {
            color: #6aa84f;
        }
        .button {
            background-color: #4a86e8;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #3c6fc0;
        }
        .need-button {
            background-color: #6aa84f;
        }
        .need-button:hover {
            background-color: #578b42;
        }
        .want-button {
            background-color: #e69138;
        }
        .want-button:hover {
            background-color: #c27a31;
        }
        .item-image {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
        }
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background-color: #4a86e8;
            transition: width 0.5s;
        }
        .explanation {
            background-color: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: left;
        }
        .score-summary {
            font-size: 18px;
            margin: 20px 0;
        }
        .result-box {
            padding: 15px;
            border-radius: 8px;
            margin: 5px 0;
        }
        .correct {
            background-color: #d9ead3;
        }
        .incorrect {
            background-color: #f4cccc;
        }
        /* Confetti styles */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #ffd700;
            animation: confetti-fall 3s ease-in-out forwards;
            z-index: 999;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .perfect-score {
            animation: pulse 1s infinite;
            color: #ff8c00;
            font-weight: bold;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <h1>Needs vs. Wants Challenge</h1>
    
    <!-- Start Screen -->
    <div id="screen-start" class="screen active">
        <h2>Welcome to the Needs vs. Wants Challenge!</h2>
        <p>Test your knowledge about what's essential for living (needs) versus what's nice to have (wants).</p>
        <button id="start-button" class="button">Start Game</button>
        <button id="how-to-play" class="button">How to Play</button>
    </div>
    
    <!-- How to Play Screen -->
    <div id="screen-how-to-play" class="screen">
        <h2>How to Play</h2>
        <p>You'll be shown different items one at a time.</p>
        <p>For each item, decide if it's a:</p>
        <ul style="list-style-type: none; padding: 0;">
            <li><strong>Need</strong> - Something essential for survival and basic living</li>
            <li><strong>Want</strong> - Something enjoyable but not necessary for basic living</li>
        </ul>
        <p>After selecting all items, you'll see your score and explanations!</p>
        <button id="back-to-start" class="button">Back to Start</button>
    </div>
    
    <!-- Game Screen -->
    <div id="screen-game" class="screen">
        <div class="progress-bar">
            <div id="progress" class="progress" style="width: 0%;"></div>
        </div>
        <h2 id="item-name">Water Bottle</h2>
        <img id="item-image" class="item-image" src="/api/placeholder/200/200" alt="Item">
        <p id="item-question">Is this a need or a want?</p>
        <div>
            <button id="need-button" class="button need-button">Need</button>
            <button id="want-button" class="button want-button">Want</button>
        </div>
    </div>
    
    <!-- Results Screen -->
    <div id="screen-results" class="screen">
        <h2>Your Results</h2>
        <div class="score-summary">
            <p>You scored: <span id="final-score">0</span>/10</p>
            <p id="score-message">Great job!</p>
        </div>
        <div id="results-details"></div>
        <button id="play-again" class="button">Play Again</button>
    </div>

    <script>
        // Game items - each with name, image placeholder, correct answer, and explanation
        const allGameItems = [
            {
                name: "Clean Water",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Clean water is essential for drinking, cooking, and hygiene. Without it, people cannot survive for more than a few days."
            },
            {
                name: "Smartphone",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "While useful for communication, smartphones are not essential for basic survival. People can live without them."
            },
            {
                name: "Basic Shelter",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Shelter protects us from weather and provides safety, making it essential for human survival in most environments."
            },
            {
                name: "Video Game Console",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "Video games provide entertainment but aren't necessary for survival or basic living standards."
            },
            {
                name: "Nutritious Food",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Food provides essential nutrients and energy. Without proper nutrition, humans cannot survive."
            },
            {
                name: "Designer Clothing",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "While clothing is a need, designer or luxury brands specifically are wants - basic clothing fulfills the need."
            },
            {
                name: "Healthcare",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Access to basic healthcare is essential for treating illnesses and injuries and maintaining well-being."
            },
            {
                name: "Vacation Trip",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "Vacations are enjoyable and can be good for mental health, but they aren't essential for basic survival."
            },
            {
                name: "Education",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Basic education is considered a need in modern society as it provides essential skills for functioning and earning a living."
            },
            {
                name: "Streaming Service",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "Entertainment services like streaming platforms provide enjoyment but aren't essential for basic living."
            },
            {
                name: "Clean Air",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Clean air is essential for breathing and survival. Without it, humans cannot live."
            },
            {
                name: "Basic Clothing",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Basic clothing protects us from the elements and provides warmth and safety."
            },
            {
                name: "Internet Access",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "While increasingly important in modern society, internet access isn't essential for survival like food, water, and shelter."
            },
            {
                name: "Sports Car",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "While transportation may be necessary in some circumstances, a luxury sports car specifically is a want, not a need."
            },
            {
                name: "Gym Membership",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "Exercise is important for health, but a gym membership is just one optional way to stay active."
            },
            {
                name: "Emergency Medicine",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "Access to emergency medical care is essential for survival in critical situations."
            },
            {
                name: "Movie Tickets",
                image: "/api/placeholder/200/200",
                answer: "want",
                explanation: "Entertainment and recreation are enjoyable but not essential for basic survival."
            },
            {
                name: "Public Transportation",
                image: "/api/placeholder/200/200",
                answer: "need",
                explanation: "In many areas, basic transportation is considered a need for accessing jobs, healthcare, and education."
            }
        ];
        
        // Function to shuffle array using Fisher-Yates algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Select 10 random items for each game
        function selectRandomItems(count = 10) {
            const shuffled = shuffleArray([...allGameItems]);
            return shuffled.slice(0, count);
        }
        
        // Get randomized items for the game
        let gameItems = [];

        // Game state variables
        let currentItemIndex = 0;
        let score = 0;
        let userAnswers = [];

        // Helper function to select an element
        function $(id) {
            return document.getElementById(id);
        }

        // Helper function to show a screen and hide others
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            $(screenId).classList.add('active');
        }

        // Show the next item in the game
        function showNextItem() {
            if (currentItemIndex >= gameItems.length) {
                endGame();
                return;
            }

            const item = gameItems[currentItemIndex];
            $("item-name").textContent = item.name;
            $("item-image").src = item.image;
            $("item-image").alt = item.name;
            
            // Update progress bar
            const progressPercent = (currentItemIndex / gameItems.length) * 100;
            $("progress").style.width = progressPercent + "%";
        }

        // Handle user's answer
        function handleAnswer(answer) {
            const currentItem = gameItems[currentItemIndex];
            const isCorrect = answer === currentItem.answer;
            
            if (isCorrect) {
                score++;
            }
            
            userAnswers.push({
                item: currentItem.name,
                userAnswer: answer,
                correctAnswer: currentItem.answer,
                isCorrect: isCorrect,
                explanation: currentItem.explanation
            });
            
            currentItemIndex++;
            showNextItem();
        }

        // End the game and show results
        function endGame() {
            showScreen("screen-results");
            $("final-score").textContent = score;
            
            // Determine message based on score
            const scoreMessage = $("score-message");
            if (score === gameItems.length) {
                scoreMessage.textContent = "PERFECT SCORE! You're a needs vs. wants expert!";
                scoreMessage.classList.add("perfect-score");
                celebratePerfectScore();
            } else if (score >= Math.floor(gameItems.length * 0.9)) {
                scoreMessage.textContent = "Outstanding! You're an expert!";
            } else if (score >= Math.floor(gameItems.length * 0.7)) {
                scoreMessage.textContent = "Great job! You have a solid understanding!";
            } else if (score >= Math.floor(gameItems.length * 0.5)) {
                scoreMessage.textContent = "Good effort! You're on the right track.";
            } else {
                scoreMessage.textContent = "Keep learning! The difference between needs and wants can be tricky.";
            }
            
            // Display detailed results
            const resultsDetails = $("results-details");
            resultsDetails.innerHTML = "";
            
            userAnswers.forEach((result, index) => {
                const resultBox = document.createElement("div");
                resultBox.className = `result-box ${result.isCorrect ? "correct" : "incorrect"}`;
                
                resultBox.innerHTML = `
                    <p><strong>${index + 1}. ${result.item}</strong></p>
                    <p>Your answer: ${result.userAnswer.toUpperCase()}</p>
                    ${!result.isCorrect ? `<p>Correct answer: ${result.correctAnswer.toUpperCase()}</p>` : ""}
                    <div class="explanation">
                        <p><strong>Explanation:</strong> ${result.explanation}</p>
                    </div>
                `;
                
                resultsDetails.appendChild(resultBox);
            });
        }
        
        // Create confetti for perfect score celebration
        function createConfetti() {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            
            // Random position, color, and size
            const left = Math.random() * 100;
            confetti.style.left = `${left}%`;
            
            const colors = ["#ffd700", "#ff0000", "#00ff00", "#0000ff", "#ff00ff", "#00ffff"];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = randomColor;
            
            const size = Math.random() * 8 + 5; // 5-13px
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            
            // Random rotation
            const rotationSpeed = Math.random() * 600 + 400; // 400-1000
            confetti.style.animation = `confetti-fall ${rotationSpeed / 100}s ease-in-out forwards`;
            
            document.body.appendChild(confetti);
            
            // Remove after animation completes
            setTimeout(() => {
                confetti.remove();
            }, (rotationSpeed / 100) * 1000);
        }
        
        // Play celebration sound
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create oscillator for "ta-da" sound
                const playNote = (frequency, start, duration, volume) => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = frequency;
                    
                    gainNode.gain.setValueAtTime(0, start);
                    gainNode.gain.linearRampToValueAtTime(volume, start + 0.05);
                    gainNode.gain.setValueAtTime(volume, start + duration - 0.05);
                    gainNode.gain.linearRampToValueAtTime(0, start + duration);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start(start);
                    oscillator.stop(start + duration);
                };
                
                const now = audioContext.currentTime;
                // Play a sequence of notes for celebration
                playNote(587.33, now, 0.2, 0.5);      // D5
                playNote(783.99, now + 0.2, 0.3, 0.6); // G5
                playNote(1046.50, now + 0.5, 0.5, 0.7); // C6
            } catch (error) {
                console.log("Audio playback not supported");
            }
        }
        
        // Celebrate perfect score with confetti and sound
        function celebratePerfectScore() {
            // Play sound immediately when showing results
            playSuccessSound();
            
            // Launch all confetti pieces at once for immediate visual impact
            for (let i = 0; i < 200; i++) {
                // Small stagger (50ms max) to prevent browser lag but still look simultaneous
                setTimeout(() => {
                    createConfetti();
                }, Math.random() * 50);
            }
        }

        // Reset the game
        function resetGame() {
            currentItemIndex = 0;
            score = 0;
            userAnswers = [];
            
            // Reset any celebration styling
            if ($("score-message").classList.contains("perfect-score")) {
                $("score-message").classList.remove("perfect-score");
            }
            
            // Get a new set of randomized items
            gameItems = selectRandomItems(10);
            
            showScreen("screen-start");
        }

        // Event listeners
        $("start-button").addEventListener("click", () => {
            // Get random items for this game session
            gameItems = selectRandomItems(10);
            showScreen("screen-game");
            showNextItem();
        });
        
        $("how-to-play").addEventListener("click", () => {
            showScreen("screen-how-to-play");
        });
        
        $("back-to-start").addEventListener("click", () => {
            showScreen("screen-start");
        });
        
        $("need-button").addEventListener("click", () => {
            handleAnswer("need");
        });
        
        $("want-button").addEventListener("click", () => {
            handleAnswer("want");
        });
        
        $("play-again").addEventListener("click", resetGame);
    </script>
</body>
</html>
